<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register | WE-ICT 2026</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav>
  <div class="logo">WE-ICT 2026</div>
  <a href="index.html" class="btn ghost">‚Üê Back to Home</a>
</nav>

<section class="section">
  <h1 style="text-align: center; margin-top: 20px;">Workshop Registration</h1>
  <p style="text-align: center;">Please fill in your details to confirm your seat.</p>

  <form id="regForm" class="registration-form">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email Address" required>
    <input type="text" name="phone" placeholder="Phone Number (e.g. 017...)" required>
    <input type="text" name="institution" placeholder="Institution / School" required>
    
    <select name="topic" required>
      <option value="" disabled selected>Select Workshop Topic</option>
      <option value="Research">Higher Studies & Research</option>
      <option value="Career">Career Development in ICT</option>
      <option value="Empowerment">Women Empowerment in Workplace</option>
    </select>

    <button type="submit" id="submitBtn">Register Now</button>
    <p id="message"></p>
  </form>
</section>

<script>
  const form = document.getElementById('regForm');
  const messageEl = document.getElementById('message');
  const btn = document.getElementById('submitBtn');

  form.onsubmit = async (e) => {
    e.preventDefault();
    
    btn.innerText = "Processing...";
    btn.style.opacity = "0.7";
    btn.disabled = true;
    messageEl.innerText = "";

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    try {
      const response = await fetch('https://YOUR-PROJECT.vercel.app/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (response.ok) {
        messageEl.style.color = "#2e7d32";
        messageEl.innerText = "Registration Successful! Check your email.";
        form.reset();
      } else {
        const errorData = await response.json().catch(() => ({}));
        messageEl.style.color = "#d32f2f";
        messageEl.innerText = "Failed: " + (errorData.error || "Please try again.");
      }
    } catch (err) {
      console.error(err);
      messageEl.style.color = "#d32f2f";
      messageEl.innerText = "Connection error. Ensure your Vercel URL is correct.";
    } finally {
      btn.innerText = "Register Now";
      btn.style.opacity = "1";
      btn.disabled = false;
    }
  };
</script>

</body>
</html>
